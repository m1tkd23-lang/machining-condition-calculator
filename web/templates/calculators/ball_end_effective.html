<!-- web/templates/calculators/ball_end_effective.html -->

{% extends "base.html" %}
{% set title = "ボール有効径（接触高さ）- 加工条件 電卓" %}

{% block content %}
<section class="card">
    <h2>ボール有効径（接触高さ）</h2>

    <div class="grid">

        <!-- ===== 入力条件 ===== -->
        <div class="grid-group">
            <div class="group-title">入力（工具・条件）</div>

            <label class="field">
                <span>ボール半径 R（mm）</span>
                <input id="r_mm" value="5.00" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>接触高さ h（mm）</span>
                <input id="h_mm" value="1.00" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>回転数 n（rpm）</span>
                <input id="rpm" value="10000" readonly data-numpad="int" autocomplete="off">
            </label>

            <label class="field">
                <span>刃数 z（teeth）</span>
                <input id="teeth" value="2" readonly data-numpad="int" autocomplete="off">
            </label>

            <label class="field">
                <span>1刃送り fz（mm/tooth）</span>
                <input id="fz" value="0.05" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>ステップオーバー ae（mm）※任意</span>
                <input id="ae_mm" value="0.50" readonly data-numpad="decimal" autocomplete="off">
            </label>
        </div>

        <!-- ===== 計算結果 ===== -->
        <div class="grid-group">
            <div class="group-title">計算結果（有効条件）</div>

            <label class="field">
                <span>有効径 Deff（mm）</span>
                <input id="deff_mm" value="" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>有効周速 Vc_eff（m/min）</span>
                <input id="vc_eff_mmin" value="" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>送り速度 vf（mm/min）</span>
                <input id="vf_mmin" value="" readonly data-numpad="int" autocomplete="off">
            </label>
        </div>

        <!-- ===== 参考値 ===== -->
        <div class="grid-group hint">
            <div class="group-title">参考値（簡易推定）</div>

            <label class="field">
                <span>粗さ目安 Rz_feed（mm）※簡易</span>
                <input id="rz_feed_mm" value="" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>カスプ高 h_cusp（mm）※簡易</span>
                <input id="hcusp_mm" value="" readonly data-numpad="decimal" autocomplete="off">
            </label>
        </div>
    </div>

    <div class="row">
        <button id="btn_calc" class="btn">計算</button>
        <a class="btn btn-sub" href="/">トップへ戻る</a>
    </div>

    <div id="msg" class="msg" aria-live="polite"></div>

    <div class="note">
        有効径：Deff = 2 × √(2Rh − h²)（0 ≤ h ≤ 2R）<br>
        有効周速：Vc_eff = π × Deff × n / 1000<br>
        送り速度：vf = fz × z × n<br>
        ※粗さ・カスプ高は目安（簡易推定）
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="/js/calculators/ball_end.js"></script>
<script src="/js/page_ball_end_effective.js"></script>
{% endblock %}