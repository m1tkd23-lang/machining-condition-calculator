<!-- web/templates/calculators/ball_end_contact_diameter.html -->

{% extends "base.html" %}
{% set title = "ボールエンド・切削点直径（工具軸角度）- 加工条件 電卓" %}

{% block content %}
<section class="card">
    <h2>ボールエンド 切削点直径（工具軸角度）</h2>

    <div class="grid">

        <!-- ===== 入力：工具・姿勢 ===== -->
        <div class="grid-group">
            <div class="group-title">入力（工具・姿勢）</div>

            <label class="field">
                <span>ボール半径 R（mm）</span>
                <input id="r_mm" value="5.00" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>回転数 n（rpm）</span>
                <input id="rpm" value="20000" readonly data-numpad="int" autocomplete="off">
            </label>

            <label class="field">
                <span>リード角 lead（deg）</span>
                <input id="lead_deg" value="10.0" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>チルト角 tilt（deg）</span>
                <input id="tilt_deg" value="10.0" readonly data-numpad="decimal" autocomplete="off">
            </label>
        </div>


        <!-- ===== 計算結果：現在条件 ===== -->
        <div class="grid-group">
            <div class="group-title">現在条件（切削点）</div>

            <label class="field">
                <span>合成傾き γ（deg）</span>
                <input id="gamma_deg" value="" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>切削点直径 Dcp（mm）</span>
                <input id="dcp_mm" value="" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>有効周速 Vc_eff（m/min）</span>
                <input id="vc_eff_mmin" value="" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>参考：先端からの高さ h（mm）</span>
                <input id="h_mm" value="" readonly data-numpad="decimal" autocomplete="off">
            </label>
        </div>

        <!-- ===== 逆算ブロック ===== -->
        <div class="grid-group hint">
            <div class="group-title">目標から逆算（オプション）</div>

            <label class="field">
                <span>目標 有効周速 Vc_eff_target（m/min）</span>
                <input id="vc_eff_target" value="600" readonly data-numpad="decimal" autocomplete="off">
            </label>

            <label class="field">
                <span>必要回転数 n_req（rpm）</span>
                <input id="rpm_req" value="" readonly data-numpad="int" autocomplete="off">
            </label>
        </div>
    </div>

    <div class="row">
        <button id="btn_calc" class="btn">計算</button>
        <a class="btn btn-sub" href="/">トップへ戻る</a>
    </div>

    <div id="msg" class="msg" aria-live="polite"></div>

    <div class="note">
        定義：0° = 先端 / 90° = 側面<br>
        合成傾き：γ = arccos( cos(lead) × cos(tilt) )<br>
        切削点直径：Dcp = 2R sin(γ)<br>
        有効周速：Vc_eff = π × Dcp × n / 1000<br>
        参考高さ：h = R (1 − cosγ)
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="/js/calculators/ball_end_contact.js"></script>
<script src="/js/page_ball_end_contact_diameter.js"></script>
{% endblock %}